<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <title>let`s 加一条！ -- 冷知识 i konw</title>
    <meta name="description" content="吹牛逼不冷场，无用但有趣的冷知识！i konw">
    <meta name="keywords" content="知识,冷知识,冷知识语录,无用,有趣,冷知识大全">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta property="og:title" content="吹牛逼不冷场，无用但有趣的冷知识！i konw">
    <meta property="og:url" content="https://8zt.cc/">
    <meta property="og:image" content="https://8zt.cc/icon.png">
    <meta property="og:site_name" content="冷知识 i know - 吹牛逼不冷场，无用但有趣的冷知识！">
    <meta property="og:description" content="吹牛逼不冷场，无用但有趣的冷知识！i konw">

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/main.css" rel="stylesheet">

    <script src="/static/js/jquery.min.js"></script>

</head>
<body>
<div class="top-wrap" style="position: absolute; top: 1vh;width: 100%;z-index: 999">
    <div class="container">
        <div class="row" style="margin-top: 30px;">
            <div class="col">
                <a href="index1.html"><img src="static/picture/logo.png" alt="冷知识 i konw" title="冷知识 i konw"></a>
            </div>
        </div>
    </div>
</div>

<div class="main-wrapper" style="position: relative; top: -6vh;">
    <div class="container main-sentence justify-content-center text-center">
        <div class="panel panel-success">
            <div class="panel-heading">
                <h3 class="panel-title">盘一条冷知识</h3>
            </div>
            <div class="panel-body">
                <div class="form-group">
                    <div class="layui-input-block">
                        <textarea class="form-control" rows="3" name="content" id="content" placeholder="牛逼内容总是闪闪发光"></textarea>
                    </div>
                </div>
                <div class="form-group">
                    <input type="text" name="link" id="link" placeholder="哦尼桑，联系方式给下喽 (选填)" class="form-control">
                </div>
                <div class="form-group">
                    <input type="text" name="name" id="name" placeholder="哦尼桑，你神武的名字（选填）" class="form-control">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="foot-1" style="position: absolute; bottom: 7vh;width: 100%;">
    <div class="container">
        <div class="row">
            <div class="col text-center">
                <span class="btn btn-primary btn-filled btn-xs" id="add_soup">盘他！</span>
                <br>
                <br>
                <a href="/">返回</a>
            </div>
        </div>
    </div>
</div>
<script>
    $('#add_soup').click(function(){
        let content = $('#content').val();
        let link = $('#qq').val();
        let name = $('#name').val();
        if(content == ''){
            layer.msg('铁子，你写内容啊！',{time:1500});
            return false;
        }
        console.log(content.length);
        if(content.length > 250){
            layer.msg('你这知识有点长啊！',{time:1500});
            return false;
        }

        if(link && link.length > 19){
            layer.msg('联系方式整这么长干啥！',{time:1500});
            return false;
        }
        if(name && name.length > 19){
            layer.msg('名字这么长，外国人啊！',{time:1500});
            return false;
        }
        //加载遮罩层
        layer.load(1, {
            shade: [0.5,'#fff']
        });
        $.ajax({
            url : '/add_soup',
            type : "POST",
            dataType : "json",
            cache : false,
            data : {
                content : content,
                link : link,
                name : name
            },
            success : function(data){
                var callingBack = '';
                if(data.code == 0){
                    callingBack = function () {
                        window.location.reload();
                    };
                }
                layer.closeAll('loading');
                layer.msg(data.msg,{time: 1000},callingBack);
            },
            error : function(data){
                layer.closeAll('loading');
                console.log(data);
            }
        });
    });
</script>
<script src="static/js/layer/layer.js"></script>
</body>
</html>